---
interface CategoryEntry {
  slug: string;
  title: string;
  description: string;
}

const { categories } = Astro.props as { categories: CategoryEntry[] };
---
<section class="content-head section">
  <h1>Gallery</h1>
  <div class="prose">
    <p>Here you gonna find a decent selection of my previous works, seperated by their categories.</p>
  </div>
</section>

<section class="content-layout section">
  <section class="content-card">
    <div class="gallery-grid">
      {categories.map(({ slug, title }) => (
        <a class="gallery-card" href={`/galleries/${slug}`} aria-label={`Open ${title}`}>
          <div class="gallery-card-thumb" data-slug={slug}></div>
          <h3>{title}</h3>
        </a>
      ))}
    </div>
  </section>
</section>

<script>
  import initGalleryCovers from "@Scripts/GalleryOverview.js";
  const boot = () => initGalleryCovers();

  // robust f√ºr SSR, CSR und Astro View-Transitions
  if (document.readyState === "complete" || document.readyState === "interactive") {
    requestAnimationFrame(boot);
  } else {
    document.addEventListener("DOMContentLoaded", boot, { once: true });
    document.addEventListener("astro:page-load", boot, { once: true });
  }
</script>
