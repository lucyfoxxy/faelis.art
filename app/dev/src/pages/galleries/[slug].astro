import { getEntry } from 'astro:content';
import Layout from '@Design/Layout.astro';
import GalleryDetailPage from '@Pages/Gallery/DetailPage.astro';

export async function getStaticPaths() {
  const catalog = (await getEntry('categories', 'albums')).data;
  return catalog.categories.reduce((paths, { slug, title }) => {
    if (!slug) return paths;
    paths.push({
      params: { slug },
      props:  { title },
    });
    return paths;
  }, [] as { params: { slug: string }; props: { title?: string } }[]);
}

const { slug }  = Astro.params;
const { title } = Astro.props;
---
<Layout title={title}>
  <GalleryDetailPage albumSlug={slug} title={title}/>
</Layout>
